<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation JavaScript ES6</title>
    <link rel="stylesheet" href="../css/style.css" />
    <script>
        // avant  es6
        /*
        var tableau = new Array('valeur', 1, 13.5);
        console.table(tableau);
        console.log(typeof tableau);
        */

        let tableau = ['valeur', 1, 12, 'Renault'];
        console.table(tableau);
        console.log(typeof tableau);

        /* les tableau associatif en utilisant la classe Array "n'existe" pas mais sont réalisables */

        let tabAsso = [];
        tabAsso['fruit'] = 'cerise';
        tabAsso['legume'] = 'courgette';
        console.log(tabAsso);

        let cars = ['Peugeot', 'Citroën', 'Renault'];
        cars[cars.length] = 'Ford'; // ça marche mais c'est sale donc on fait pas
        
        cars.push('Fiat'); // oui car c'est la méthode faîte pour ça pour les tableaux
        
        console.log(cars);
        console.log(cars.length);

        // les tableaux sont des objets itérable : on peut les parcourir avec des boucle (et certaines méthodes associées aux tableaux et aux objets)
        console.log('----------------- boucles ---------------------');
        console.log('----------------- boucle for ---------------------');
        for(let i = 0; i < cars.length; i = i + 1){
            console.log(cars[i]);
        }
        
        console.log('----------------- boucle for in ---------------------');
        for(let index in cars){
            console.log(cars[index]);
        }
        
        /* le for in peut parcourir les object */
        
        let obj = {
            nom: 'Duflot',
            prenom: 'Nicolas',
            presentation: function(){
                return `Bonjour, je m'appelle ${this.prenom} ${this.nom}`;
            }
        };
        
        console.log(obj);
        console.log(obj.nom);
        console.log(obj.prenom);
        console.log(obj.presentation());
        
        for( let key in obj){
            console.log(`la clef est ${key}, la valeur est ${obj[key]}`);
        }
        
        // depuis es6
        console.log('----------------- boucle for of ---------------------');
        for(let value of cars){
            console.log(`la valeur actuelle dans cars est ${value}`);
        }
        
        console.log('----------------- boucle tant que et faire tant que ---------------------');
        console.log('----------------- boucle tant que ---------------------');
        let cpt = 0;
        while(cpt < cars.length){
            console.log(cars[cpt]);
            cpt = cpt + 1;
        }
        
        console.log('----------------- boucle faire tant que ---------------------');
        cpt = 0;
        do{
            console.log(cars[cpt]);
            cpt = cpt + 1;
        }while(cpt < cars.length);
        
        console.log('----------------- les méthodes de parcours de tableau ---------------------');
        console.log('----------------- foreach (n\'est pas limité au tableaux, mais s\'applique à tous les objets itérables ) ---------------------');

        cars.forEach(function(valeur, index, tab){
            console.log('test', valeur, index, tab);
        });

        let tabTaux = [1.1, 1.5, 1.8];
        tabTaux.forEach(function(valeur, index, tab){
            tab[index] = valeur * 23.5;
        });

        console.log(tabTaux);
        
        console.log('----------------- .map() (limité au tableaux) ---------------------');
        
        cars.map(function(valeur, index, tab){
            console.log('test', valeur, index, tab);
        });
        
        let tabTaux2 = [1.1, 1.5, 1.8];
        tabTaux.map(function(valeur, index, tab){
            tab[index] = valeur * 23.5;
        });
        
        console.log(tabTaux2);
        
        // es6 méthode .entries()
        /* 
        vient du modèle objet. extrait les clefs et les valeurs des éléments d'un tableau sous la forme d'un tableau de deux élément : index 0 contient la clef, index 1 contient la valeur
        */
        console.log('----------------- .entries() ---------------------');
        for(let entry of cars.entries()){
            console.log(entry);
        }

        cars.push('Hyundai');
        cars.push('Seat', 'Toyota');
        console.table(cars);

        // supprimer les valeurs d'un tableau
        // .pop(), .shift(), .splice()
        // .pop()   => extrait la dernière valeur du tableau
        let lastEntry = cars.pop();
        console.log(lastEntry, cars);
        
        // .shift() => extrait la première valeur
        let firstEntry = cars.shift();
        console.log(firstEntry, cars);
        
        // .splice() utilisation 1 : extraire des valeurs dans le tableau
        let removed = cars.splice(1, 3);
        console.log(removed, cars);
        
        // .splice() utilisation 2 : remplacer des valeurs dans le tableau
        let replaced = cars.splice(0, 1, 'Alpine', 'Mazda');
        console.log(replaced, cars);
        
        // .splice() utilisation 3 : inserrer des valeurs dans le tableau
        cars.splice(1, 0, firstEntry, lastEntry, removed[0], removed[1], removed[2], replaced[0]);
        console.log(cars);

        //let carsClone = cars;
        // ici on créer une nouvelle référence au tableau existant : un nom différents pour la même variable
        let carsClone = cars.slice();
        console.log(`cars : ${cars}`);
        console.log(`carsClone : ${carsClone}`);
        carsClone.pop();
        console.log(`cars : ${cars}`);
        console.log(`carsClone : ${carsClone}`);

    </script>
</head>
<body>
    <header>
        <a href="../"><h1>Formation JavaScript ES6</h1></a>
    </header>
    <nav>
        <ul>
            <li>
                <details>
                    <summary>
                        Introduction
                    </summary>
                    <ul>
                        <li>
                            <a href="../introduction/index.html" title="premiers scripts JS" >Intro JS</a>
                        </li>
                        <li>
                            <a href="../introduction/tableaux.html" title="premiers scripts JS" >Les tableaux</a>
                        </li>
                    </ul>
                </details>
            </li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </nav>
    <main>

    </main>
    <footer>

    </footer>
</body>
</html>